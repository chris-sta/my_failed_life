<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rats</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: #2c3e50;
            height: 100vh;
        }
        
        .rat {
            position: absolute;
            width: 120px;
            height: 120px;
            transition: transform 0.1s linear;
            pointer-events: none;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }
        
        .rat img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
        }
        
        @keyframes scurry {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .rat.moving img {
            animation: scurry 0.3s infinite;
        }
    </style>
    <link rel="stylesheet" href="../styles/counter.css">
</head>
<body>
    <script>
        const ratImages = [
            '../resources/rat1.png',
            '../resources/rat2.png',
            '../resources/rat3.png'
        ];
        
        class Rat {
            constructor() {
                this.element = document.createElement('div');
                this.element.className = 'rat';
                
                this.img = document.createElement('img');
                this.img.src = ratImages[Math.floor(Math.random() * ratImages.length)];
                this.img.onerror = () => {
                    this.img.src = ratImages[Math.floor(Math.random() * ratImages.length)];
                };
                
                this.element.appendChild(this.img);
                document.body.appendChild(this.element);
                
                this.x = Math.random() * (window.innerWidth - 120);
                this.y = Math.random() * (window.innerHeight - 120);
                this.speed = 1 + Math.random() * 2;
                this.angle = Math.random() * Math.PI * 2;
                this.size = 80 + Math.random() * 80;
                this.element.style.width = this.size + 'px';
                this.element.style.height = this.size + 'px';
                
                this.changeDirectionTimer = 0;
                this.changeDirectionDelay = 60 + Math.random() * 120;
                this.facingRight = Math.random() > 0.5;
                
                this.updatePosition();
            }
            
            updatePosition() {
                this.element.style.left = this.x + 'px';
                this.element.style.top = this.y + 'px';
                this.element.style.transform = `scaleX(${this.facingRight ? 1 : -1})`;
            }
            
            update() {
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                
                if (this.x <= 0 || this.x >= window.innerWidth - this.size) {
                    this.angle = Math.PI - this.angle;
                    this.x = Math.max(0, Math.min(window.innerWidth - this.size, this.x));
                    this.facingRight = !this.facingRight;
                }
                
                if (this.y <= 0 || this.y >= window.innerHeight - this.size) {
                    this.angle = -this.angle;
                    this.y = Math.max(0, Math.min(window.innerHeight - this.size, this.y));
                }
                
                this.changeDirectionTimer++;
                if (this.changeDirectionTimer > this.changeDirectionDelay) {
                    this.angle += (Math.random() - 0.5) * Math.PI;
                    this.changeDirectionTimer = 0;
                    this.changeDirectionDelay = 60 + Math.random() * 120;
                    
                    const oldFacing = this.facingRight;
                    this.facingRight = Math.cos(this.angle) > 0;
                }
                
                if (Math.random() < 0.005) {
                    this.element.classList.remove('moving');
                    setTimeout(() => {
                        this.element.classList.add('moving');
                    }, 1000 + Math.random() * 2000);
                } else {
                    this.element.classList.add('moving');
                }
                
                this.updatePosition();
            }
        }
        
        const rats = [];
        const numRats = 20;
        
        for (let i = 0; i < numRats; i++) {
            setTimeout(() => {
                rats.push(new Rat());
            }, i * 200);
        }
        
        function animate() {
            rats.forEach(rat => rat.update());
            requestAnimationFrame(animate);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
            rats.forEach(rat => {
                rat.x = Math.min(rat.x, window.innerWidth - rat.size);
                rat.y = Math.min(rat.y, window.innerHeight - rat.size);
                rat.updatePosition();
            });
        });
    </script>

<div class="page-counter">16/24</div>
<div class="page-buttons">
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/index.html'">
        Home
    </button>
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/inventory.html'">
        Inventory
    </button>
</div>

</body>
</html>