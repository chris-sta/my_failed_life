<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rats_also</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: linear-gradient(135deg, #434343 0%, #000000 100%);
            height: 100vh;
        }
        
        canvas {
            display: block;
        }
    </style>
    <link rel="stylesheet" href="../styles/counter.css">
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const ratColors = [
            { body: '#A0826D', belly: '#D2B48C', tail: '#8B7355', ear: '#CD9B71' },
            { body: '#FFFFFF', belly: '#FFF8F0', tail: '#FFE4E1', ear: '#FFD1DC' },
            { body: '#696969', belly: '#A9A9A9', tail: '#505050', ear: '#808080' },
            { body: '#2F2F2F', belly: '#4F4F4F', tail: '#1F1F1F', ear: '#3F3F3F' },
            { body: '#8B4513', belly: '#CD853F', tail: '#654321', ear: '#A0522D' },
            { body: '#C0C0C0', belly: '#E8E8E8', tail: '#A8A8A8', ear: '#D0D0D0' },
            { body: '#F5DEB3', belly: '#FFEFD5', tail: '#DEB887', ear: '#FFE4B5' },
            { body: '#556B2F', belly: '#6B8E23', tail: '#3D5229', ear: '#8FBC8F' }
        ];
        
        class Rat {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.speed = 0.5 + Math.random() * 1.5;
                this.angle = Math.random() * Math.PI * 2;
                this.size = 0.6 + Math.random() * 0.6;
                this.colors = ratColors[Math.floor(Math.random() * ratColors.length)];
                
                this.changeDirectionTimer = 0;
                this.changeDirectionDelay = 60 + Math.random() * 120;
                this.pauseTimer = 0;
                this.isPaused = false;
                
                this.walkCycle = 0;
                this.earWiggle = 0;
                this.noseTwitch = 0;
                this.tailSwish = 0;
                
                this.wiggliness = Math.random();
                this.nervousness = Math.random();
            }
            
            drawRat(ctx) {
                ctx.save();
                ctx.translate(this.x, this.y);
                
                const facingRight = Math.cos(this.angle) > 0;
                if (!facingRight) {
                    ctx.scale(-1, 1);
                }
                
                const scale = this.size;
                ctx.scale(scale, scale);
                
                ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
                ctx.beginPath();
                ctx.ellipse(0, 45, 35, 10, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = this.colors.tail;
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';
                ctx.beginPath();
                const tailSwish = Math.sin(this.tailSwish) * 10;
                ctx.moveTo(-30, 15);
                ctx.quadraticCurveTo(-50, 10 + tailSwish, -70, 5 + tailSwish * 2);
                ctx.quadraticCurveTo(-85, 0 + tailSwish * 2, -95, -5 + tailSwish);
                ctx.stroke();
                
                for (let i = 0; i < 8; i++) {
                    const t = i / 8;
                    const x = -30 - t * 65;
                    const y = 15 - t * 20 + Math.sin(this.tailSwish + i * 0.3) * 8;
                    ctx.strokeStyle = i % 2 === 0 ? this.colors.tail : 
                                      this.adjustBrightness(this.colors.tail, -20);
                    ctx.lineWidth = 4 - t * 1.5;
                    ctx.beginPath();
                    ctx.arc(x, y, 0.5, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                ctx.fillStyle = this.colors.body;
                ctx.beginPath();
                const backLegOffset = Math.sin(this.walkCycle) * 3;
                ctx.ellipse(-20, 30 + backLegOffset, 8, 15, 0.3, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = this.adjustBrightness(this.colors.body, -20);
                ctx.beginPath();
                ctx.ellipse(-22, 42 + backLegOffset, 10, 5, 0, 0, Math.PI * 2);
                ctx.fill();
                
                const gradient = ctx.createRadialGradient(0, 5, 0, 0, 15, 30);
                gradient.addColorStop(0, this.colors.belly);
                gradient.addColorStop(0.5, this.colors.body);
                gradient.addColorStop(1, this.adjustBrightness(this.colors.body, -20));
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.ellipse(-5, 15, 28, 20, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = this.colors.belly;
                ctx.beginPath();
                ctx.ellipse(-5, 20, 20, 15, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = this.colors.body;
                ctx.beginPath();
                const frontLegOffset = Math.sin(this.walkCycle + Math.PI) * 3;
                ctx.ellipse(10, 28 + frontLegOffset, 6, 12, -0.2, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = this.adjustBrightness(this.colors.body, -20);
                ctx.beginPath();
                ctx.ellipse(12, 38 + frontLegOffset, 7, 4, 0, 0, Math.PI * 2);
                ctx.fill();
                
                for (let i = 0; i < 4; i++) {
                    ctx.fillStyle = this.adjustBrightness(this.colors.body, -30);
                    ctx.beginPath();
                    ctx.ellipse(8 + i * 2, 39 + frontLegOffset, 1, 2, 0, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                ctx.fillStyle = this.colors.body;
                ctx.beginPath();
                ctx.ellipse(20, 5, 18, 15, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = this.adjustBrightness(this.colors.body, 10);
                ctx.beginPath();
                ctx.ellipse(32 + Math.sin(this.noseTwitch) * 0.5, 8, 10, 8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                const earWiggle = Math.sin(this.earWiggle) * 2;
                ctx.fillStyle = this.colors.ear;
                ctx.beginPath();
                ctx.ellipse(12, -5 + earWiggle, 9, 12, -0.3, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = this.adjustBrightness(this.colors.ear, -30);
                ctx.beginPath();
                ctx.ellipse(12, -4 + earWiggle, 5, 7, -0.3, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = this.colors.ear;
                ctx.beginPath();
                ctx.ellipse(24, -6 - earWiggle * 0.5, 9, 12, 0.3, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = this.adjustBrightness(this.colors.ear, -30);
                ctx.beginPath();
                ctx.ellipse(24, -5 - earWiggle * 0.5, 5, 7, 0.3, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#000000';
                ctx.beginPath();
                ctx.arc(26, 2, 3, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#FFFFFF';
                ctx.beginPath();
                ctx.arc(27, 1, 1.5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#FFB6C1';
                ctx.beginPath();
                ctx.ellipse(40 + Math.sin(this.noseTwitch) * 0.5, 8, 3, 2.5, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#8B4150';
                ctx.beginPath();
                ctx.arc(39, 7.5, 0.8, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.arc(41, 7.5, 0.8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
                ctx.lineWidth = 1;
                
                for (let i = 0; i < 3; i++) {
                    const whiskerAngle = -0.3 + i * 0.2;
                    const whiskerLength = 35 + i * 5;
                    ctx.beginPath();
                    ctx.moveTo(38, 5 + i * 2);
                    ctx.lineTo(38 + Math.cos(whiskerAngle) * whiskerLength, 
                              5 + i * 2 + Math.sin(whiskerAngle) * whiskerLength);
                    ctx.stroke();
                }
                
                for (let i = 0; i < 2; i++) {
                    const whiskerAngle = 0.1 + i * 0.15;
                    const whiskerLength = 30 + i * 5;
                    ctx.beginPath();
                    ctx.moveTo(38, 10 + i * 2);
                    ctx.lineTo(38 + Math.cos(whiskerAngle) * whiskerLength, 
                              10 + i * 2 + Math.sin(whiskerAngle) * whiskerLength);
                    ctx.stroke();
                }
                
                ctx.strokeStyle = this.adjustBrightness(this.colors.body, -10);
                ctx.lineWidth = 0.5;
                for (let i = 0; i < 15; i++) {
                    const fx = -30 + Math.random() * 50;
                    const fy = 5 + Math.random() * 20;
                    const fAngle = Math.random() * Math.PI * 2;
                    ctx.beginPath();
                    ctx.moveTo(fx, fy);
                    ctx.lineTo(fx + Math.cos(fAngle) * 3, fy + Math.sin(fAngle) * 3);
                    ctx.stroke();
                }
                
                ctx.restore();
            }
            
            adjustBrightness(color, amount) {
                const hex = color.replace('#', '');
                const r = Math.max(0, Math.min(255, parseInt(hex.substr(0, 2), 16) + amount));
                const g = Math.max(0, Math.min(255, parseInt(hex.substr(2, 2), 16) + amount));
                const b = Math.max(0, Math.min(255, parseInt(hex.substr(4, 2), 16) + amount));
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            }
            
            update() {
                if (this.isPaused) {
                    this.pauseTimer--;
                    if (this.pauseTimer <= 0) {
                        this.isPaused = false;
                    }
                    this.earWiggle += 0.05;
                    this.noseTwitch += 0.15;
                    this.tailSwish += 0.02;
                    return;
                }
                
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                
                if (this.x <= 50 || this.x >= canvas.width - 50) {
                    this.angle = Math.PI - this.angle;
                    this.x = Math.max(50, Math.min(canvas.width - 50, this.x));
                }
                
                if (this.y <= 50 || this.y >= canvas.height - 50) {
                    this.angle = -this.angle;
                    this.y = Math.max(50, Math.min(canvas.height - 50, this.y));
                }
                
                this.changeDirectionTimer++;
                if (this.changeDirectionTimer > this.changeDirectionDelay) {
                    this.angle += (Math.random() - 0.5) * Math.PI * this.nervousness;
                    this.changeDirectionTimer = 0;
                    this.changeDirectionDelay = 60 + Math.random() * 120;
                }
                
                if (Math.random() < 0.003) {
                    this.isPaused = true;
                    this.pauseTimer = 30 + Math.random() * 90;
                }
                
                this.walkCycle += 0.15 * this.speed;
                this.earWiggle += 0.05 * this.wiggliness;
                this.noseTwitch += 0.15;
                this.tailSwish += 0.03;
            }
        }
        
        const rats = [];
        const numRats = 25;
        
        for (let i = 0; i < numRats; i++) {
            rats.push(new Rat());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#434343');
            gradient.addColorStop(1, '#000000');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            rats.forEach(rat => {
                rat.update();
                rat.drawRat(ctx);
            });
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>

<div class="page-counter">24/36</div>
<div class="page-buttons">
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/index.html'">
        Home
    </button>
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/inventory.html'">
        Inventory
    </button>
</div>

</body>
</html>