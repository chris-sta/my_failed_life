<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>train</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;background:#0b0e13;overflow:hidden}
canvas{display:block;width:100%;height:100%}
</style>
    <link rel="stylesheet" href="../styles/counter.css">
</head>
<body>
<canvas id="c"></canvas>
<script>
const canvas=document.getElementById("c")
const ctx=canvas.getContext("2d")
let w,h,dpr
function resize(){
dpr=window.devicePixelRatio||1
w=window.innerWidth
h=window.innerHeight
canvas.width=w*dpr
canvas.height=h*dpr
ctx.setTransform(dpr,0,0,dpr,0,0)
}
window.addEventListener("resize",resize)
resize()

function rand(n){return Math.sin(n)*43758.5453123%1}
function noise(x,y){
const i=Math.floor(x)
const j=Math.floor(y)
const u=x-i
const v=y-j
const a=rand(i+j*57)
const b=rand(i+1+j*57)
const c=rand(i+(j+1)*57)
const d=rand(i+1+(j+1)*57)
return (a*(1-u)+b*u)*(1-v)+(c*(1-u)+d*u)*v
}
function fbm(x,y){
let n=0
let a=0.5
for(let i=0;i<5;i++){
n+=a*noise(x,y)
x*=2
y*=2
a*=0.5
}
return n
}

let t=0
function drawForest(speed,depth,color){
for(let y=0;y<h;y+=2){
for(let x=0;x<w;x+=2){
const nx=(x+t*speed)/(200*depth)
const ny=y/(200*depth)
const m=fbm(nx,ny)
if(m>0.45){
ctx.fillStyle=color
ctx.fillRect(x,y,2,2)
}
}
}
}

function draw(){
ctx.clearRect(0,0,w,h)
const g=ctx.createLinearGradient(0,0,0,h)
g.addColorStop(0,"#cfd8e3")
g.addColorStop(1,"#e9eef4")
ctx.fillStyle=g
ctx.fillRect(0,0,w,h)

drawForest(0.3,1.5,"rgba(90,100,110,0.4)")
drawForest(0.6,1,"rgba(70,80,90,0.6)")
drawForest(1.2,0.6,"rgba(40,50,60,0.9)")

ctx.globalCompositeOperation="overlay"
for(let i=0;i<3;i++){
ctx.fillStyle="rgba(255,255,255,0.05)"
ctx.fillRect(0,0,w,h)
}
ctx.globalCompositeOperation="source-over"

const frameW=w*0.85
const frameH=h*0.75
const fx=(w-frameW)/2
const fy=(h-frameH)/2

ctx.fillStyle="#1a1c22"
ctx.fillRect(0,0,w,fy)
ctx.fillRect(0,fy,fx,frameH)
ctx.fillRect(fx+frameW,fy,fx,frameH)
ctx.fillRect(0,fy+frameH,w,h)

ctx.strokeStyle="#3b3f4a"
ctx.lineWidth=Math.max(8,w*0.01)
ctx.strokeRect(fx,fy,frameW,frameH)

ctx.fillStyle="rgba(20,22,28,0.6)"
ctx.fillRect(fx,fy+frameH*0.75,frameW,frameH*0.25)

t+=1
requestAnimationFrame(draw)
}
draw()
</script>

<div class="page-counter">26/36</div>
<div class="page-buttons">
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/index.html'">
        Home
    </button>
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/inventory.html'">
        Inventory
    </button>
</div>

</body>
</html>
