<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>The Eye</title>

<style>
    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, #0b0f14 0%, #050608 70%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        font-family: system-ui, sans-serif;
    }

    .eye-container {
        width: min(80vw, 420px);
        aspect-ratio: 1 / 1;
        position: relative;
        filter: drop-shadow(0 20px 40px rgba(0,0,0,0.8));
        animation: float 6s ease-in-out infinite;
    }

    .eyelid {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: radial-gradient(circle at center, #1a1f27 0%, #0c1016 70%, #050608 100%);
        transform-origin: center;
        animation: blink 8s infinite ease-in-out;
        z-index: 5;
    }

    .sclera {
        position: absolute;
        inset: 6%;
        border-radius: 50%;
        background: radial-gradient(circle at 40% 35%, #f8f9fb 0%, #e4e7ec 55%, #cfd5dd 100%);
        overflow: hidden;
    }

    .iris {
        position: absolute;
        width: 48%;
        height: 48%;
        top: 26%;
        left: 26%;
        border-radius: 50%;
        background:
            radial-gradient(circle at center, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0.4) 35%, rgba(0,0,0,0.85) 100%),
            radial-gradient(circle at 30% 30%, #7fd1ff 0%, #2a7fff 35%, #10203a 70%);
        box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 0 0 30px rgba(120,180,255,0.25);
    }

    .iris::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: repeating-conic-gradient(
            from 0deg,
            rgba(255,255,255,0.12) 0deg,
            rgba(255,255,255,0.02) 4deg,
            rgba(0,0,0,0.15) 8deg
        );
        mix-blend-mode: overlay;
    }

    .pupil {
        position: absolute;
        width: 22%;
        height: 22%;
        top: 39%;
        left: 39%;
        border-radius: 50%;
        background: radial-gradient(circle, #000 0%, #050608 100%);
    }

    .highlight {
        position: absolute;
        width: 18%;
        height: 18%;
        top: 30%;
        left: 34%;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0) 70%);
        filter: blur(1px);
    }

    .highlight.small {
        width: 8%;
        height: 8%;
        top: 46%;
        left: 52%;
        opacity: 0.6;
    }

    @keyframes blink {
        0%, 96%, 100% { transform: scaleY(0); }
        97% { transform: scaleY(1); }
        98% { transform: scaleY(0); }
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
    }

    .dialog {
        margin-top: 24px;
        min-height: 1.6em;
        padding: 10px 16px;
        font-size: 0.95rem;
        letter-spacing: 0.03em;
        color: rgba(220,230,255,0.85);
        background: rgba(10, 14, 20, 0);
        border: 1px solid rgba(120, 149, 255, 0);
        border-radius: 8px;
        backdrop-filter: blur(6px);
        box-shadow: inset 0 0 12px rgba(0, 0, 0, 0);
        max-width: 80vw;
        text-align: center;
        font-weight: 300;
    }
</style>
    <link rel="stylesheet" href="../styles/counter.css">
</head>

<body>
    <div class="eye-container">
        <div class="sclera">
            <div class="iris">
                <div class="pupil"></div>
            </div>
            <div class="highlight"></div>
            <div class="highlight small"></div>
        </div>
        <div class="eyelid"></div>
    </div>

    <div class="dialog" id="dialog"></div>

<script>
const dialog = document.getElementById("dialog");

const script = [
  {
    text: "Hello?",
    delay: 8000,
    duration: 6000
  },
  {
    text: "Are you there?",
    delay: 6000,
    duration: 6000
  },
  {
    choice: {
      prompt: "",
      options: [
        {
          label: "(Do not acknowledge)",
          response: [
            {
              text: "Oh..It must have been a dream..",
              delay: 700,
              duration: 2600
            }
          ]
        },
        {
          label: "I am",
          response: [
            {
              text: "I never thought I'd get a visitor",
              delay: 700,
              duration: 2600
            }
          ]
        }
      ]
    }
  },
  {
    text: "PLACE YOUR THIRD LINE HERE",
    delay: 800,
    duration: 2500
  }
];

const typeSpeed = 45;
let pointer = 0;

function clearDialog() {
  dialog.innerHTML = "";
}

function typeText(text, onDone) {
  let i = 0;
  dialog.textContent = "";

  function tick() {
    dialog.textContent = text.slice(0, i);
    i++;

    if (i <= text.length) {
      setTimeout(tick, typeSpeed);
    } else {
      onDone();
    }
  }

  tick();
}

function showChoice(step) {
  clearDialog();

  const prompt = document.createElement("div");
  prompt.textContent = step.choice.prompt;
  prompt.style.marginBottom = "10px";
  dialog.appendChild(prompt);

  step.choice.options.forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option.label;

    btn.style.margin = "6px";
    btn.style.padding = "6px 14px";
    btn.style.background = "rgba(120,150,255,0)";
    btn.style.border = "1px solid rgba(120,150,255,0)";
    btn.style.color = "rgba(220,230,255,0.9)";
    btn.style.borderRadius = "6px";
    btn.style.cursor = "pointer";
    btn.style.fontWeight = "300";

    btn.onclick = () => {
      clearDialog();
      playSequence(option.response, nextStep);
    };

    dialog.appendChild(btn);
  });
}

function playSequence(sequence, done) {
  let i = 0;

  function playNext() {
    if (i >= sequence.length) {
      done();
      return;
    }

    const step = sequence[i++];

    setTimeout(() => {
      typeText(step.text, () => {
        setTimeout(() => {
          clearDialog();
          playNext();
        }, step.duration);
      });
    }, step.delay);
  }

  playNext();
}

function nextStep() {
  if (pointer >= script.length) return;

  const step = script[pointer++];

  if (step.choice) {
    showChoice(step);
  } else {
    setTimeout(() => {
      typeText(step.text, () => {
        setTimeout(() => {
          clearDialog();
          nextStep();
        }, step.duration);
      });
    }, step.delay);
  }
}

nextStep();
</script>

<div class="page-counter">11/36</div>
<div class="page-buttons">
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/index.html'">
        Home
    </button>
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/inventory.html'">
        Inventory
    </button>
</div>

</body>
</html>
