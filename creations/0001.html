<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Doom Lifting</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    background:#0a0a0a;
    overflow:hidden;
    font-family: monospace;
}
canvas {
    display:block;
}
</style>
    <link rel="stylesheet" href="../styles/counter.css">
</head>
<body>
<canvas id="doom"></canvas>
<script>
const canvas = document.getElementById("doom");
const ctx = canvas.getContext("2d");

let w,h;
function resize(){
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
}
window.addEventListener("resize",resize);
resize();

class Figure{
    constructor(x){
        this.x = x;
        this.y = h*0.8;
    }
    draw(ctx){
        ctx.fillStyle="#111";
        ctx.beginPath();
        ctx.arc(this.x,this.y-30,20,0,Math.PI*2);
        ctx.fill();
        ctx.fillRect(this.x-5,this.y-30,10,50);
        ctx.fillRect(this.x-15,this.y+20,5,20);
        ctx.fillRect(this.x+10,this.y+20,5,20);
    }
}

let cross = {
    x:w*0.5,
    y:h*0.75,
    width:10,
    height:150,
    angle:0,
    lift:0
};

const figures = [
    new Figure(w*0.35),
    new Figure(w*0.65),
    new Figure(w*0.5)
];

function drawRopes(){
    ctx.strokeStyle="#333";
    ctx.lineWidth=2;
    for(let f of figures){
        ctx.beginPath();
        ctx.moveTo(f.x,f.y-10);
        ctx.lineTo(cross.x+Math.random()*2-1, cross.y-cross.height/2 + cross.lift);
        ctx.stroke();
    }
}

function drawCross(){
    ctx.save();
    ctx.translate(cross.x, cross.y-cross.height/2+cross.lift);
    ctx.rotate(cross.angle);
    ctx.fillStyle="#222";
    ctx.fillRect(-cross.width/2,0,cross.width,cross.height);
    ctx.fillRect(-cross.height/2,-cross.width/2,cross.height,cross.width);
    ctx.restore();
}

function drawFog(){
    const grad = ctx.createRadialGradient(w/2,h/2,0,w/2,h/2,w);
    grad.addColorStop(0,'rgba(0,0,0,0.0)');
    grad.addColorStop(1,'rgba(10,10,10,0.9)');
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,w,h);
}

let t = 0;
function animate(){
    ctx.clearRect(0,0,w,h);

    drawFog();

    cross.lift += 0.2;
    cross.angle = Math.sin(t*0.02)*0.02;

    drawCross();
    drawRopes();

    for(let f of figures) f.draw(ctx);

    t++;
    requestAnimationFrame(animate);
}

animate();
</script>

<div class="page-counter">1/36</div>
<div class="page-buttons">
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/index.html'">
        Home
    </button>
    <button onclick="location.href='https://chris-sta.github.io/my_failed_life/inventory.html'">
        Inventory
    </button>
</div>

</body>
</html>
